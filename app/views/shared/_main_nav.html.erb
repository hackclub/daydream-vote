<%# locals: (progress: nil) %>

<% stages = %i[project_info invite_team submit vote] %>
<% current_stage_index = stages.index(progress) || 0 %>

<nav class="progress-nav">
  <% if signed_in? && progress %>
    <div class="progress-container">
      <%= link_to @project.present? ? edit_project_path : "#", class: "progress-step #{"active" if current_stage_index >= 0}" do %>
        <div class="step-circle"></div>
        <div class="step-label">Project Info</div>
      <% end %>

      <div class="progress-line <%= "active" if current_stage_index >= 1 %>"></div>

      <%= link_to @project.present? && @project.title.present? ? projects_invite_members_path : "#", class: "progress-step #{"active" if current_stage_index >= 1}" do %>
        <div class="step-circle"></div>
        <div class="step-label">Invite Team</div>
      <% end %>

      <div class="progress-line <%= "active" if current_stage_index >= 2 %>"></div>

      <div class="progress-step <%= "active" if current_stage_index >= 2 %>">
        <div class="step-circle"></div>
        <div class="step-label">Review & Submit</div>
      </div>
      <div class="progress-line <%= "active" if current_stage_index >= 3 %>"></div>

      <div class="progress-step <%= "active" if current_stage_index >= 3 %>">
        <div class="step-circle"></div>
        <div class="step-label">Vote and Get T-Shirt</div>
      </div>
    </div>
  <% end %>
</nav>
