<%# locals: (progress: nil) %>

<% stages = %i[your_info project_info invite_team review vote] %>
<% current_stage_index = stages.index(progress) || 0 %>

<nav class="progress-nav">
  <% if signed_in? && progress %>
    <div class="progress-container">
      <%= link_to edit_profile_path, class: "progress-step #{"active" if current_stage_index >= 0}" do %>
        <div class="step-circle"></div>
        <div class="step-label">Your Info</div>
      <% end %>

      <div class="progress-line <%= "active" if current_stage_index >= 1 %>"></div>

      <%= link_to edit_project_path, class: "progress-step #{"active" if current_stage_index >= 1}" do %>
        <div class="step-circle"></div>
        <div class="step-label">Project Info</div>
      <% end %>

      <div class="progress-line <%= "active" if current_stage_index >= 2 %>"></div>

      <%= link_to projects_invite_members_path, class: "progress-step #{"active" if current_stage_index >= 2}" do %>
        <div class="step-circle"></div>
        <div class="step-label">Invite Team</div>
      <% end %>

      <div class="progress-line <%= "active" if current_stage_index >= 3 %>"></div>

      <%= link_to review_project_path, class: "progress-step #{"active" if current_stage_index >= 3}" do %>
        <div class="step-circle"></div>
        <div class="step-label">Review & Submit</div>
      <% end %>

      <div class="progress-line <%= "active" if current_stage_index >= 4 %>"></div>

      <%= link_to projects_vote_path, class: "progress-step #{"active" if current_stage_index >= 4}" do %>
        <div class="step-circle"></div>
        <div class="step-label">Vote & Get T-Shirt</div>
      <% end %>
    </div>
  <% end %>
</nav>
