<div class="main">
  <div class="card big">
    <h1 style="margin-bottom: 0.2rem">Welcome to the team!</h1>
    <p style="text-align: center; opacity: 0.8; margin-top: 0;margin-bottom: 2rem;">You've successfully joined the project:</p>
    
    <div class="card light">
      <h2><%= @project.title %></h2>
      <p style="text-align: center; margin: 1rem 0;"><%= @project.description %></p>
    </div>

    <div class="card light" style="padding-bottom: 1.5rem;">
      <h3 style="margin-bottom: 1rem;">Project Details</h3>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; font-size: 1rem;">
        <div>
          <strong>Event:</strong><br>
          <%= @project.attending_event.name if @project.attending_event %>
        </div>
        <div>
          <strong>Current status:</strong><br>
          <span style="text-transform: capitalize;"><%= @project.aasm_state.humanize %></span>
        </div>
        <div>
          <strong>Team members:</strong><br>
          <%= @project.users.count %> member<%= 's' if @project.users.count != 1 %>
        </div>
        <% if @project.repo_url.present? %>
        <div>
          <strong>Repository:</strong><br>
          <a href="<%= @project.repo_url %>" target="_blank" style="color: #E472AB; text-decoration: underline;">View Code</a>
        </div>
        <% end %>
      </div>
    </div>

    <% if @project.users.any? %>
    <div class="card light" style="padding-bottom: 1.5rem;">
      <h3 style="margin-bottom: 1rem;">Your Teammates</h3>
      <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 0.75rem;">
        <% @project.users.each do |user| %>
          <div style="background-color: #ffffff; padding: 0.5rem 1rem; border-radius: 9999px; border: 1px solid #E472AB; font-size: 0.9rem; position: relative;">
            <strong><%= user.email %></strong>
            <% creator_position = @project.creator_positions.find_by(user: user) %>
            <% if creator_position %>
              <span style="opacity: 0.6; margin-left: 0.25rem;">(<%= creator_position.role.humanize %>)</span>
            <% end %>
            <% if user.profile_complete? %>
              <span style="color: #10b981; margin-left: 0.25rem; font-size: 0.8rem;">✓</span>
            <% else %>
              <span style="color: #f59e0b; margin-left: 0.25rem; font-size: 0.8rem;">⚠</span>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
    <% end %>
    
    <% unless current_user.profile_complete? %>
    <div class="card light" style="padding: 0.75rem 1rem; border-left: 4px solid #f59e0b; background-color: #fef3c7;">
      <div style="display: flex; align-items: center; gap: 1.25rem;">
        <div style="font-size: 2rem;">⚠️</div>
        <div>
          <h4 style="margin: 0; font-size: 1.1rem; color: #92400e;">Complete Your Profile</h4>
          <p style="margin: 0.25rem 0 0 0; font-size: 1rem; color: #92400e;">You need to complete your profile before the team can submit this project.</p>
        </div>
      </div>
    </div>
    <% end %>

    <div class="card light" style="padding: 0.5rem 1rem; border-left: 4px solid #E472AB;">
      <div style="display: flex; align-items: center; gap: 1.25rem;">
        <img src="/shirt.png" style="height: 4rem;" >
        <div>
          <h4 style="margin: 0; font-size: 1.1rem; color: rgb(131, 55, 16);">T-shirt Eligibility</h4>
          <p style="margin: 0.25rem 0 0 0; font-size: 1rem;">Once the project is submitted, you'll be eligible for a t-shirt!</p>
        </div>
      </div>
    </div>

    <div class="submit-wrapper" style="margin: 2rem auto;">
      <% if current_user.profile_complete? %>
        <%= link_to "Go to Project Dashboard", edit_project_path, class: "submit-button-elem" %>
      <% else %>
        <%= link_to "Complete Your Profile", edit_profile_path, class: "submit-button-elem" %>
      <% end %>
      <img src="/button-clouds.svg" alt="" class="submit-clouds">
    </div>

    <div style="text-align: center; margin: 1rem 0;">
      <p style="font-size: 1rem; opacity: 0.8; margin: 0;">
        Work with your team to build something amazing!
      </p>
    </div>
  </div>
</div>
